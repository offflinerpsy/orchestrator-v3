# üß† PROJECT MEMORY v11 ‚Äî ORCHESTRATOR BUILDER
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-21  
**–í–µ—Ä—Å–∏—è**: v11 (production-ready)  
**–°—Ç–∞—Ç—É—Å**: üöÄ Active Development ‚Üí QA Phase (REVISOR audit)

---

## üìñ –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ](#—á—Ç–æ-—ç—Ç–æ-—Ç–∞–∫–æ–µ)
2. [–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞](#–∏—Å—Ç–æ—Ä–∏—è-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
4. [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–§–∏—á–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ñ–∏—á–∏-–∏-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
6. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
7. [API –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#api-–∏-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
8. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
9. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
10. [–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã](#—Ä–∞–±–æ—á–∏–µ-–ø—Ä–æ—Ü–µ—Å—Å—ã)
11. [Context7 Integration](#context7-integration)
12. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
13. [CI/CD –∏ –¥–µ–ø–ª–æ–π](#cicd-–∏-–¥–µ–ø–ª–æ–π)
14. [–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∏–∑–≤–µ—Å—Ç–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
15. [Roadmap](#roadmap)
16. [–ö–æ–º–∞–Ω–¥–∞ –∏ –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã](#–∫–æ–º–∞–Ω–¥–∞-–∏-–∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã)

---

## üéØ –ß–¢–û –≠–¢–û –¢–ê–ö–û–ï

**Orchestrator v11** ‚Äî —ç—Ç–æ **visual website builder** –≤ —Å—Ç–∏–ª–µ **Dyad.dev v0**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- üé® **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∏–∑–∞–π–Ω** HTML-—Å—Ç—Ä–∞–Ω–∏—Ü –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Design Mode)
- üñºÔ∏è **–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** —á–µ—Ä–µ–∑ AI (ComfyUI + FLUX API)
- üß© **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –∏–∑ shadcn/ui –∏ HyperUI
- üìã **–£–ø—Ä–∞–≤–ª—è—Ç—å –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á** —á–µ—Ä–µ–∑ SSE (Server-Sent Events)
- ‚å®Ô∏è **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏** –∏ Command Palette (cmdk)
- üîç **–ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã** –∏ –∏–∑–º–µ–Ω—è—Ç—å –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞

### –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
- **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏**: –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏–Ω–≥ UI
- **–î–∏–∑–∞–π–Ω–µ—Ä—ã**: –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∫–æ–¥–∞
- **Product Managers**: –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ –∑–∞ –º–∏–Ω—É—Ç—ã

### –û—Ç–ª–∏—á–∏—è –æ—Ç –∞–Ω–∞–ª–æ–≥–æ–≤
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π**: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –±–µ–∑ –æ–±–ª–∞–∫–∞
- ‚úÖ **Open Source**: Apache-2.0 –ª–∏—Ü–µ–Ω–∑–∏—è
- ‚úÖ **AI-powered**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (SDXL/FLUX)
- ‚úÖ **Modern Stack**: Next.js 15, React 19, TypeScript 5.9

---

## üìú –ò–°–¢–û–†–ò–Ø –ü–†–û–ï–ö–¢–ê

### –§–∞–∑–∞ 0: –ü—Ä–æ—Ç–æ—Ç–∏–ø (—Å–µ–Ω—Ç—è–±—Ä—å 2024)
- –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ Next.js 14 —Å –±–∞–∑–æ–≤—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º HTML
- ComfyUI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ REST API
- –ë–µ–∑ SSE, –±–µ–∑ Design Mode, –±–µ–∑ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à

### –§–∞–∑–∞ P0-P6: Builder v0 (–æ–∫—Ç—è–±—Ä—å 2024 ‚Üí —è–Ω–≤–∞—Ä—å 2025)
**P0**: Resizable Layout + Hotkeys (15.8 kB)
- `react-resizable-panels` (bvaughn, 4410‚òÖ)
- `react-hotkeys-hook` (johannesklauss, 2988‚òÖ)
- Radix UI Tooltip + DropdownMenu
- Commit: `05dfa1d`, `35e52b6`

**P1**: Design Mode + Element Inspector (16.2 kB, +0.4 kB)
- DesignOverlay.tsx (178 lines)
- design-mode-script.js (185 lines, iframe injection)
- postMessage communication
- Commands: `/design on|off`, `/select`, `/apply`
- Commit: `326f21a`

**P2**: Image Generation (FLUX + ComfyUI) (16.9 kB, +0.7 kB)
- Worker-based `/api/generate`
- NSSM Windows Service –¥–ª—è job processing
- Job polling (2s interval)
- Gallery –≤ Inspector
- Commit: `001e68d`

**P3**: SSE Job Queue + Gallery Pagination (18.5 kB, +1.6 kB)
- `/api/jobs/stream` (EventSource)
- JobQueue modal —Å real-time updates
- PATCH/DELETE –º–µ—Ç–æ–¥—ã –¥–ª—è jobs
- Pagination (10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- Commit: `f04f61e`

**P4**: Template Import System (19.8 kB, +1.3 kB)
- `/api/templates/import` (shadcn registry API)
- TemplateGallery (category tabs)
- Commands: `/import shadcn <component>`
- Auto-install dependencies —á–µ—Ä–µ–∑ pnpm
- Commit: `347be9f`

**P5**: Command Palette (cmdk) (19.8 kB, +0 kB)
- cmdk 1.1.1 (pacocoursey)
- Hotkey: `Ctrl+K` / `Cmd+K`
- 11 –∫–æ–º–∞–Ω–¥ (Navigation, Design, Generation, Templates)
- Commit: `79021eb`

**P6**: Stability + Health Checks (19.8 kB, docs only)
- `docs/P6-STABILITY.md` (240 lines)
- `docs/BUILDER-V0-COMPLETE.md` (272 lines)
- Health matrix (ComfyUI, FLUX, Jobs, Templates, SSE)
- Commit: `e0e2c57`, `96d3aa5`

**P7**: Context7 Playwright Queries (STARTED)
- 4 queries fetched (playwright-typescript-modern, drag-drop-resize, sse-websocket, react-components)
- `playwright.config.ts` updated (port 3000‚Üí3001)
- Status: ‚è∏Ô∏è PAUSED (tests not written yet)

### –§–∞–∑–∞ REVISOR: –ê—É–¥–∏—Ç (–æ–∫—Ç—è–±—Ä—å 2025)
- **–¶–µ–ª—å**: –ñ–µ—Å—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–¥–∞/UI/UX –±–µ–∑ –ø—Ä–∞–≤–æ–∫ –∫–æ–¥–∞
- **Commits**: 7 –∫–æ–º–º–∏—Ç–æ–≤ (structure ‚Üí tests ‚Üí a11y ‚Üí lhci ‚Üí ci ‚Üí summarize)
- **Branch**: `audit/revisor-20251020-2356`
- **PR**: [#3](https://github.com/offflinerpsy/orchestrator-v3/pull/3)
- **Status**: ‚úÖ Infrastructure ready, awaiting execution

### –§–∞–∑–∞ v11: Production Ready (—Ç–µ–∫—É—â–∞—è)
- **–¶–µ–ª—å**: –†–∞–±–æ—á–∏–π production-ready –±–∏–ª–¥
- **–ó–∞–¥–∞—á–∏**: –ü—Ä–æ–≥–Ω–∞—Ç—å REVISOR, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ø–æ—á–∏–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏
- **Target**: Stable v11 release with full E2E coverage

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### High-Level Overview
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ORCHESTRATOR v11                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  ChatSidebar ‚îÇ  ‚îÇ CanvasPreview‚îÇ  ‚îÇ  Inspector   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  (Commands)  ‚îÇ  ‚îÇ  (iframe +   ‚îÇ  ‚îÇ  (Tabs:      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ   Design     ‚îÇ  ‚îÇ   Gallery,   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  /design on  ‚îÇ  ‚îÇ   Overlay)   ‚îÇ  ‚îÇ   Templates, ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  /gen image  ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ   Output)    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  /import     ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ                  ‚îÇ            ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                            ‚îÇ                               ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ                    ‚îÇ  Next.js API   ‚îÇ                      ‚îÇ
‚îÇ                    ‚îÇ    Routes      ‚îÇ                      ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îÇ                            ‚îÇ                               ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ                  ‚îÇ           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   ComfyUI    ‚îÇ  ‚îÇ  FLUX API   ‚îÇ  ‚îÇ  Jobs Worker  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (SDXL/etc)  ‚îÇ  ‚îÇ  (external) ‚îÇ  ‚îÇ  (NSSM svc)   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  :8188       ‚îÇ  ‚îÇ  :5007      ‚îÇ  ‚îÇ  (scans jobs/)‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tech Stack (–ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –Ω–∏–∂–µ)
- **Frontend**: Next.js 15.0.3 (App Router), React 18.3.1, TypeScript 5.9.3
- **Backend**: Next.js API Routes (Node.js 22.20.0)
- **Styling**: Tailwind CSS 3.4.18, shadcn/ui components
- **State**: React hooks (useState, useEffect, useRef)
- **Hotkeys**: react-hotkeys-hook 5.2.1
- **Layout**: react-resizable-panels 3.0.6
- **Command Palette**: cmdk 1.1.1
- **AI Services**: ComfyUI (local), FLUX API (external)
- **Package Manager**: pnpm 10.18.3
- **Testing**: Playwright 1.56.1, axe-core, Lighthouse CI

---

## üß© –ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1. ChatSidebar (281 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/ChatSidebar.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–∞—Ä—Å–∏—Ç slash-–∫–æ–º–∞–Ω–¥—ã (`/design`, `/gen`, `/import`, `/apply`)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ API endpoints
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π (future enhancement)

**Slash Commands**:
```typescript
/design on|off          // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å Design Mode
/select <locator>       // –í—ã–±—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ preview
/apply <locator> prop="value"  // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
/gen image <prompt>     // –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (ComfyUI/FLUX)
/import shadcn <component>  // –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ shadcn/ui
/import hyperui <section>   // (Placeholder) –ò–º–ø–æ—Ä—Ç –∏–∑ HyperUI
/undo                   // (TODO) –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```

**Hotkeys**:
- `Ctrl+K` / `Cmd+K` ‚Üí Focus chat input (–∏–ª–∏ toggle Command Palette –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- `Ctrl+Enter` / `Cmd+Enter` ‚Üí Submit message
- `Escape` ‚Üí Blur input

**Dependencies**:
- `react-hotkeys-hook` –¥–ª—è hotkeys
- `lucide-react` –¥–ª—è –∏–∫–æ–Ω–æ–∫
- Radix UI `Tooltip` –∏ `DropdownMenu`

---

### 2. CanvasPreview (305 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/CanvasPreview.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –†–µ–Ω–¥–µ—Ä–∏—Ç iframe —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º HTML
- –ò–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç `design-mode-script.js` –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Design Mode
- –°–ª—É—à–∞–µ—Ç postMessage —Å–æ–±—ã—Ç–∏—è –æ—Ç iframe
- –ü–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –≤ DesignOverlay

**Design Mode Flow**:
1. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/design on` –≤ ChatSidebar
2. ChatSidebar dispatches custom event `design-mode-toggle`
3. CanvasPreview —Å–ª—É—à–∞–µ—Ç event ‚Üí –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç script –≤ iframe
4. Script –¥–æ–±–∞–≤–ª—è–µ—Ç hover overlay + click handler
5. Click –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç ‚Üí postMessage —Å locator/attributes ‚Üí DesignOverlay –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç info
6. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/apply` ‚Üí postMessage ‚Üí Script –ø–∞—Ç—á–∏—Ç DOM runtime

**postMessage Protocol**:
```typescript
// Parent ‚Üí iframe
{ type: 'design-mode-enable' }
{ type: 'design-mode-disable' }
{ type: 'select-element', locator: string }
{ type: 'apply-changes', locator: string, changes: { prop: value } }

// iframe ‚Üí Parent
{ type: 'element-selected', locator: string, attributes: {...} }
{ type: 'apply-success' }
{ type: 'apply-error', error: string }
```

**Dependencies**:
- `design-mode-script.js` (public/design-mode-script.js, 185 lines)
- React `useRef` –¥–ª—è iframe ref
- Custom events –¥–ª—è communication

---

### 3. Inspector (494 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/Inspector.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å 4 —Ç–∞–±–∞–º–∏ (–í—ã–≤–æ–¥, –ì–∞–ª–µ—Ä–µ—è, –®–∞–±–ª–æ–Ω—ã, –≠–ª–µ–º–µ–Ω—Ç)
- **–í—ã–≤–æ–¥**: –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π (future enhancement)
- **–ì–∞–ª–µ—Ä–µ—è**: Job polling (2s interval), –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, pagination (10/page)
- **–®–∞–±–ª–æ–Ω—ã**: TemplateGallery –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (shadcn/ui, HyperUI)
- **–≠–ª–µ–º–µ–Ω—Ç**: Properties –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–æ—Ç DesignOverlay)

**Job Polling Logic**:
```typescript
useEffect(() => {
  const interval = setInterval(async () => {
    const response = await fetch('/api/jobs')
    const data = await response.json()
    setJobs(data.jobs || [])
  }, 2000) // Poll every 2s
  
  return () => clearInterval(interval)
}, [])
```

**Gallery Features**:
- Click –Ω–∞ image ‚Üí copy URL to clipboard
- Status indicators: queued / running / done / failed
- Pagination buttons (–ù–∞–∑–∞–¥ / –í–ø–µ—Ä—ë–¥)
- Delete job button (–≤—ã–∑—ã–≤–∞–µ—Ç DELETE /api/jobs?id=...)

**Dependencies**:
- Radix UI `Tabs`
- `lucide-react` –¥–ª—è –∏–∫–æ–Ω–æ–∫
- `sonner` –¥–ª—è toast notifications

---

### 4. DesignOverlay (178 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/DesignOverlay.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π overlay –ø–æ–≤–µ—Ä—Ö CanvasPreview
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ (tag, id, class, locator)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–∫–Ω—É—Ç—å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞ —Ç–∞–± "–≠–ª–µ–º–µ–Ω—Ç" –≤ Inspector

**UI**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <div> .container #main          ‚îÇ
‚îÇ  Locator: div.container#main     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å‚îÇ                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Props**:
- `selectedElement: { locator, attributes }` ‚Äî –æ—Ç CanvasPreview
- `onEdit: () => void` ‚Äî callback –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–∞

---

### 5. JobQueue (171 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/JobQueue.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- Modal –æ–∫–Ω–æ —Å real-time —Å–ø–∏—Å–∫–æ–º jobs
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `/api/jobs/stream` —á–µ—Ä–µ–∑ EventSource
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã (queued ‚Üí running ‚Üí done/failed)
- –ö–Ω–æ–ø–∫–∏ Delete / Retry

**SSE Connection**:
```typescript
const eventSource = new EventSource('/api/jobs/stream')

eventSource.addEventListener('job-update', (event) => {
  const job = JSON.parse(event.data)
  setJobs(prev => {
    const index = prev.findIndex(j => j.id === job.id)
    if (index !== -1) {
      prev[index] = job
      return [...prev]
    }
    return [...prev, job]
  })
})
```

**SSE Format** (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):
```
event: job-update
data: {"id":"abc123","status":"running","prompt":"sunset","progress":45}

event: job-update
data: {"id":"abc123","status":"done","result":{"url":"http://..."}}

: ping
```

**Dependencies**:
- Radix UI `Dialog`
- EventSource API (native browser)

---

### 6. TemplateGallery (196 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/TemplateGallery.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ —Ç–∞–±—ã (UI, Marketing, Real Estate)
- Search input —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –ö–Ω–æ–ø–∫–∞ "Import" –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –í—ã–∑—ã–≤–∞–µ—Ç POST `/api/templates/import` —Å `{ source: 'shadcn', component: 'button' }`

**Shadcn Components** (–¥–æ—Å—Ç—É–ø–Ω—ã–µ):
- button, dialog, dropdown-menu, input, card, badge

**HyperUI Sections** (manual copy):
- hero-1, cta-1, features-1 (–±—É–¥—É—â–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤ P8)

**Dependencies**:
- Radix UI `Tabs`
- `lucide-react` –¥–ª—è –∏–∫–æ–Ω–æ–∫

---

### 7. CommandPalette (240 lines)
**–ü—É—Ç—å**: `apps/admin/components/builder-v0/CommandPalette.tsx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- Overlay modal —Å –ø–æ–∏—Å–∫–æ–º –∫–æ–º–∞–Ω–¥
- Grouped commands (Navigation, Design, Generation, Templates)
- Keyboard navigation (Arrow keys, Enter, Escape)

**Commands** (11 total):
```typescript
// Navigation
'Go to Builder'    ‚Üí router.push('/')
'Go to Status'     ‚Üí router.push('/status')
'Go to Settings'   ‚Üí router.push('/settings')

// Design
'Toggle Design Mode'   ‚Üí dispatch custom event
'Select Element'       ‚Üí prompt for locator

// Generation
'Generate Image'       ‚Üí prompt for prompt
'Open Queue'           ‚Üí dispatch custom event

// Templates
'Import shadcn'        ‚Üí prompt for component
'Import HyperUI'       ‚Üí prompt for section

// Utils
'Clear History'        ‚Üí (future)
```

**Hotkey**: `Ctrl+K` / `Cmd+K` (conflicts —Å chat focus ‚Äî palette –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ)

**Dependencies**:
- cmdk 1.1.1 (pacocoursey/cmdk)
- `react-hotkeys-hook`

---

## üöÄ –§–ò–ß–ò –ò –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (P0-P6)

**1. Resizable Layout** (P0)
- Three-panel —Å–∏—Å—Ç–µ–º–∞: Chat (20-35%) | Canvas (30%+) | Inspector (20-35%, collapsible)
- Drag handles –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤
- Min/max constraints
- Persist —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ localStorage (future)

**2. Hotkeys System** (P0)
- `Ctrl+K` ‚Üí Focus chat / Toggle Command Palette
- `Ctrl+Enter` ‚Üí Submit message
- `Ctrl+J` ‚Üí Toggle logs (future)
- `Escape` ‚Üí Close modals / Blur input
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ global scope (except form inputs)

**3. Design Mode** (P1)
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ hover
- Click –¥–ª—è –≤—ã–±–æ—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
- Inspector –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ (tag, id, class, attributes)
- Runtime patching DOM –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- Commands: `/design on|off`, `/select`, `/apply`

**4. Image Generation** (P2)
- Worker-based job system (NSSM Windows Service)
- FLUX API ‚Üí ComfyUI fallback (SDXL)
- Job statuses: created ‚Üí queued ‚Üí running ‚Üí done/failed
- Gallery —Å preview, click to copy URL
- Command: `/gen image <prompt>`

**5. SSE Job Queue** (P3)
- Real-time updates —á–µ—Ä–µ–∑ EventSource
- Modal —Å —Å–ø–∏—Å–∫–æ–º jobs (delete/retry buttons)
- Heartbeat `: ping` –∫–∞–∂–¥—ã–µ 30s
- Auto-reconnect –ø—Ä–∏ –æ–±—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ UI updates

**6. Template Import** (P4)
- Shadcn/ui registry integration
- Auto-install dependencies —á–µ—Ä–µ–∑ pnpm
- Component files –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `components/templates/`
- TemplateGallery —Å category tabs –∏ search
- Command: `/import shadcn <component>`

**7. Command Palette** (P5)
- Fuzzy search –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- Grouped categories
- Keyboard navigation (‚Üë/‚Üì, Enter, Esc)
- 11 –∫–æ–º–∞–Ω–¥ (Navigation, Design, Generation, Templates)
- Hotkey: `Ctrl+K` / `Cmd+K`

**8. Health Checks** (P6)
- `/api/health` endpoint (ComfyUI, FLUX, Jobs, Templates, SSE)
- Status matrix –≤ docs (P6-STABILITY.md)
- Production readiness checklist
- Manual smoke test procedures

---

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (P7)

**Playwright E2E Tests**:
- ‚úÖ Context7 queries fetched (4/4)
- ‚úÖ Config updated (port 3001, webServer enabled)
- ‚è∏Ô∏è Test files not written yet (sanity, design-mode, generation, queue, health)

---

### üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (P8-P10)

**P8: HyperUI Import Automation**
- HTML scraper (hyperui.dev)
- HTML‚ÜíReact conversion
- Integrate –≤ `/api/templates/import` —Å source='hyperui'

**P9: Electron Wrapper** (optional)
- Desktop app packaging
- Native menus
- Auto-update —á–µ—Ä–µ–∑ electron-updater
- IPC handlers –¥–ª—è file system access

**P10: CI Automation**
- GitHub Actions workflow
- Run `/api/health` + Playwright –Ω–∞ –∫–∞–∂–¥—ã–π PR
- Deploy preview –Ω–∞ Vercel/Netlify

---

## üíª –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### Frontend
```json
{
  "framework": "Next.js 15.0.3 (App Router)",
  "react": "18.3.1",
  "typescript": "5.9.3",
  "styling": "Tailwind CSS 3.4.18",
  "components": "shadcn/ui (Radix UI primitives)",
  "icons": "lucide-react 0.546.0",
  "layout": "react-resizable-panels 3.0.6",
  "hotkeys": "react-hotkeys-hook 5.2.1",
  "command-palette": "cmdk 1.1.1",
  "toast": "sonner 2.0.7",
  "validation": "zod 4.1.12"
}
```

### Backend
```json
{
  "runtime": "Node.js 22.20.0",
  "api": "Next.js API Routes (Edge + Node)",
  "sse": "Server-Sent Events (native)",
  "worker": "NSSM Windows Service (job processing)",
  "database": "better-sqlite3 12.4.1 (not used in builder-v0)",
  "logging": "pino 10.1.0 + pino-pretty 13.1.2",
  "metrics": "prom-client 15.1.3",
  "error-tracking": "@sentry/nextjs 10.20.0"
}
```

### AI Services
```json
{
  "comfyui": {
    "url": "http://127.0.0.1:8188",
    "models": ["SDXL", "SD1.5", "etc"],
    "api": "REST + WebSocket"
  },
  "flux": {
    "url": "http://127.0.0.1:5007",
    "status": "‚ö†Ô∏è Currently unavailable (fallback to ComfyUI)",
    "api": "REST"
  }
}
```

### Testing
```json
{
  "e2e": "@playwright/test 1.56.1",
  "a11y": "@axe-core/playwright 4.10.2",
  "perf": "@lhci/cli 0.15.1",
  "wait-on": "wait-on 9.0.1",
  "concurrently": "concurrently 9.2.1"
}
```

### Build & Deploy
```json
{
  "package-manager": "pnpm 10.18.3",
  "node-version": "22.20.0",
  "build-tool": "Next.js Compiler (SWC)",
  "bundler": "Webpack 5 (via Next.js)",
  "postcss": "8.5.6",
  "autoprefixer": "10.4.21"
}
```

---

## üîå API –ò –≠–ù–î–ü–û–ò–ù–¢–´

### Core API Routes

**1. Health Check**
```
GET /api/health
Response: {
  "status": "healthy" | "degraded" | "unhealthy",
  "components": {
    "comfyui": { "status": "healthy", "url": "...", "version": "..." },
    "flux": { "status": "degraded", "error": "Port 5007 not accessible" },
    "jobs": { "status": "healthy", "directory": "C:\\Work\\Orchestrator\\jobs" },
    "templates": { "status": "healthy", "directory": "..." },
    "sse": { "status": "healthy", "endpoint": "/api/jobs/stream" }
  }
}
```

**2. Job Management**
```
GET /api/jobs
Response: { "jobs": [...] }

GET /api/jobs?id=<id>
Response: { "job": {...} }

PATCH /api/jobs?id=<id>
Body: { "status": "retry" }
Response: { "success": true }

DELETE /api/jobs?id=<id>
Response: { "success": true }
```

**3. Job Stream (SSE)**
```
GET /api/jobs/stream
Headers: {
  "Content-Type": "text/event-stream; charset=utf-8",
  "Cache-Control": "no-cache",
  "X-Accel-Buffering": "no"
}
Events:
  event: job-update
  data: {"id":"...","status":"running","progress":50}
  
  : ping  (heartbeat every 30s)
```

**4. Image Generation**
```
POST /api/generate
Body: {
  "prompt": "sunset over mountains",
  "workflow": "sdxl" | "flux",
  "runNow": true
}
Response: {
  "jobId": "abc123",
  "status": "queued"
}
```

**5. Design Mode**
```
POST /api/design/apply
Body: {
  "locator": "div.container#main",
  "changes": {
    "innerHTML": "<p>New content</p>",
    "className": "new-class",
    "style.color": "red"
  }
}
Response: {
  "success": true,
  "validLocator": true
}
```

**6. Template Import**
```
POST /api/templates/import
Body: {
  "source": "shadcn" | "hyperui",
  "component": "button",
  "style": "new-york" | "default"
}
Response: {
  "success": true,
  "files": ["components/templates/button.tsx"],
  "dependencies": ["@radix-ui/react-button"]
}
```

---

### ComfyUI Proxy Routes

**1. System Stats**
```
GET /api/comfy/system_stats
Proxy to: http://127.0.0.1:8188/system_stats
Response: { "devices": [...], "system": {...} }
```

**2. Object Info**
```
GET /api/comfy/object_info
Proxy to: http://127.0.0.1:8188/object_info
Response: { "CheckpointLoaderSimple": {...}, ... }
```

**3. Prompt**
```
POST /api/comfy/prompt
Body: { "prompt": {...}, "client_id": "..." }
Proxy to: http://127.0.0.1:8188/prompt
Response: { "prompt_id": "...", "number": 123 }
```

**4. History**
```
GET /api/comfy/history/<prompt_id>
Proxy to: http://127.0.0.1:8188/history/<prompt_id>
Response: { "<prompt_id>": { "outputs": {...} } }
```

---

## üõ†Ô∏è –£–°–¢–ê–ù–û–í–ö–ê –ò –ó–ê–ü–£–°–ö

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **OS**: Windows 10/11, macOS, Linux
- **Node.js**: 22.20.0+
- **pnpm**: 10.18.3+
- **RAM**: 8 GB (16 GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è ComfyUI)
- **Disk**: 10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–º–æ–¥–µ–ª–∏ ComfyUI ~5 GB)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```powershell
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/offflinerpsy/orchestrator-v3.git
cd orchestrator-v3

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (root)
corepack enable
pnpm install

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (apps/admin)
cd apps/admin
pnpm install

# 4. –°–æ–∑–¥–∞—Ç—å .env.local
cp .env.example .env.local
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏: HF_TOKEN, BFL_API_KEY, COMFYUI_URL

# 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ComfyUI (–µ—Å–ª–∏ –Ω–µ—Ç)
# –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º: https://github.com/comfyanonymous/ComfyUI
# –õ–∏–±–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ NSSM service (—Å–º. SETUP-GUIDE.md)

# 6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Playwright browsers (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)
npx playwright install chromium
```

---

### –ó–∞–ø—É—Å–∫ Dev Server

```powershell
cd C:\Work\Orchestrator\apps\admin

# Development mode (port 3001, hot reload)
pnpm dev

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
start http://localhost:3001/
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ –ø–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç (process 50956), dev server –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3001.

---

### –ó–∞–ø—É—Å–∫ Production Build

```powershell
# 1. Build
pnpm build

# 2. Start production server
pnpm start

# –û—Ç–∫—Ä—ã—Ç—å
start http://localhost:3000/
```

---

### –ó–∞–ø—É—Å–∫ NSSM Services (Windows only)

```powershell
# ComfyUI
nssm start OrchestratorComfyUI

# Worker (job processing)
nssm start OrchestratorWorker

# Monitor
nssm start OrchestratorMonitor

# Guardian (watchdog)
nssm start OrchestratorGuardian

# Panel
nssm start OrchestratorPanel

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
Get-Service Orchestrator* | Select-Object Name, Status
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### Environment Variables (.env.local)

```bash
# API Keys
HF_TOKEN=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
BFL_API_KEY=e4ac44c9-c0a6-469c-a72a-8b5dcbe38dbc

# Services
COMFYUI_URL=http://127.0.0.1:8188
FLUX_API_URL=http://127.0.0.1:5007

# Jobs
JOBS_DIR=C:\Work\Orchestrator\jobs

# Templates
TEMPLATES_DIR=apps/admin/components/templates

# Sentry (optional)
SENTRY_DSN=https://...
SENTRY_ENVIRONMENT=development

# Node
NODE_ENV=development
NODE_OPTIONS=--trace-uncaught --unhandled-rejections=strict
```

---

### Next.js Config (next.config.js)

```javascript
module.exports = {
  reactStrictMode: true,
  
  // Images
  images: {
    domains: ['localhost', '127.0.0.1'],
  },
  
  // Rewrites (proxy API calls)
  async rewrites() {
    return [
      {
        source: '/api/comfy/:path*',
        destination: 'http://127.0.0.1:8188/:path*',
      },
    ]
  },
  
  // Headers (CORS, CSP)
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'SAMEORIGIN',
          },
          {
            key: 'Content-Security-Policy',
            value: "frame-ancestors 'self'",
          },
        ],
      },
    ]
  },
}
```

---

### Playwright Config (playwright.audit.config.ts)

```typescript
export default defineConfig({
  testDir: './tests/e2e',
  timeout: 30 * 1000,
  fullyParallel: true,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  
  reporter: [
    ['list'],
    ['html', { outputFolder: 'reports/playwright/html' }],
    ['json', { outputFile: 'reports/playwright/results.json' }],
  ],
  
  use: {
    baseURL: 'http://127.0.0.1:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },
  
  projects: [
    { name: 'chromium', use: { ...devices['Desktop Chrome'] } },
  ],
})
```

---

## üîÑ –†–ê–ë–û–ß–ò–ï –ü–†–û–¶–ï–°–°–´

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Development Flow)

1. **–°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É**: `git checkout -b feature/new-feature`
2. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –ü–∏—Å–∞—Ç—å –∫–æ–¥, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
3. **–ö–æ–º–º–∏—Ç**: `git commit -m "feat: add new feature"`
4. **Push**: `git push origin feature/new-feature`
5. **PR**: –°–æ–∑–¥–∞—Ç—å Pull Request –Ω–∞ GitHub
6. **Review**: Code review –æ—Ç –∫–æ–ª–ª–µ–≥
7. **Merge**: Merge –≤ main –ø–æ—Å–ª–µ approval

---

### –ü—Ä–æ—Ü–µ—Å—Å –±–∏–ª–¥–∞ (Build Flow)

```powershell
# 1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
pnpm install

# 2. Run linter
pnpm lint

# 3. Run type check
tsc --noEmit

# 4. Build production
pnpm build

# 5. Test production build locally
pnpm start

# 6. Run E2E tests (if implemented)
pnpm revisor:test
```

---

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è (Deployment Flow)

**Development**:
- Auto-deploy –Ω–∞ Vercel –ø—Ä–∏ push –≤ `main`
- URL: https://orchestrator-v3.vercel.app

**Staging**:
- Manual deploy –Ω–∞ staging —Å–µ—Ä–≤–µ—Ä
- URL: https://staging.orchestrator.dev

**Production**:
- Tagged release (`git tag v11.0.0`)
- Manual deploy –Ω–∞ production
- URL: https://orchestrator.dev

---

### –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Testing Flow)

**Manual Testing**:
1. –û—Ç–∫—Ä—ã—Ç—å `/builder-v0`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å resizable panels (drag handles)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å hotkeys (Ctrl+K, Ctrl+Enter, Escape)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Design Mode (`/design on`)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Image Generation (`/gen image sunset`)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Job Queue (‚â° ‚Üí "–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á")
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Template Import (`/import shadcn button`)
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Command Palette (`Ctrl+K`)

**Automated Testing** (REVISOR):
```powershell
cd apps/admin

# Build production
pnpm revisor:build

# Run full audit suite
pnpm revisor:all
# (start server ‚Üí wait ‚Üí Playwright ‚Üí LHCI ‚Üí axe ‚Üí stop server)

# Generate summary report
pnpm revisor:report
# (creates docs/_audit/<timestamp>/INDEX.md)
```

---

## üß™ CONTEXT7 INTEGRATION

### –ß—Ç–æ —Ç–∞–∫–æ–µ Context7

**Context7** ‚Äî —ç—Ç–æ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è **modern code patterns** –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–ª—è **–≤–∞–ª–∏–¥–∞—Ü–∏–∏** –Ω–∞—à–∏—Ö –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–π –ø—Ä–æ—Ç–∏–≤ best practices.

**URL**: `https://context7.com/v1/repositories/query`

---

### –ö–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Context7

**–î–ª—è –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏ (P0-P7)** –º—ã –¥–µ–ª–∞–µ–º 3-4 –∑–∞–ø—Ä–æ—Å–∞ –∫ Context7:
1. **Core Library Patterns** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `react-resizable-panels-typescript`)
2. **Integration Patterns** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Next.js-hotkeys-keyboard-shortcuts`)
3. **Complementary Patterns** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `radix-ui-tooltip-Next.js`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: JSON files —Å code snippets (5000-30000 tokens –∫–∞–∂–¥—ã–π)

---

### Context7 Queries (P0-P7)

**P0 Queries** (4/4 ‚úÖ):
- `react-resizable-panels-typescript` ‚Üí 8438 tokens, 39 snippets (bvaughn, 4410‚òÖ)
- `Next.js-hotkeys-keyboard-shortcuts` ‚Üí 26410 tokens, 220 snippets
- `radix-ui-tooltip-Next.js`
- `cmdk-command-palette` (preview –¥–ª—è P5)

**P1 Queries** (2/3 ‚ö†Ô∏è):
- `react-iframe-postmessage` ‚úÖ
- `dom-inspector-overlay` ‚ùå Timeout
- `css-selector-matching` ‚úÖ

**P2 Queries** (3/3 ‚úÖ):
- `flux-api-integration` ‚úÖ
- `comfyui-websocket` ‚úÖ (depth warning)
- `image-generation-workflows` ‚úÖ (depth warning)

**P3 Queries** (3/3 ‚úÖ):
- `sse-server-sent-events` ‚úÖ
- `job-queue-ui` ‚úÖ (depth warning)
- `image-gallery-react` ‚úÖ (depth warning)

**P4 Queries** (3/3 ‚úÖ):
- `shadcn-ui-registry-api` ‚úÖ
- `component-import-workflow` ‚úÖ (depth warning)
- `template-gallery-ui` ‚úÖ (depth warning)

**P5 Queries** (3/3 ‚úÖ):
- `cmdk-command-palette-react` ‚úÖ
- `command-k-shortcut` ‚úÖ
- `command-palette-search` ‚úÖ

**P7 Queries** (4/4 ‚úÖ):
- `playwright-typescript-modern` ‚úÖ (depth warning)
- `playwright-drag-drop-resize` ‚úÖ (depth warning)
- `playwright-sse-websocket` ‚úÖ (depth warning)
- `playwright-react-components` ‚úÖ (depth warning)

**Success Rate**: 18/19 (94.7%)

---

### Context7 Scripts

**Location**: `scripts/context7-fetch-p*.ps1`

**Example** (P0):
```powershell
# scripts/context7-fetch-p0.ps1
$queries = @(
  "react-resizable-panels-typescript",
  "Next.js-hotkeys-keyboard-shortcuts",
  "radix-ui-tooltip-Next.js",
  "cmdk-command-palette"
)

foreach ($query in $queries) {
  $body = @{
    query = $query
    depth = 3
  } | ConvertTo-Json
  
  $response = Invoke-RestMethod -Uri "https://context7.com/v1/repositories/query" -Method POST -Body $body -ContentType "application/json"
  
  $outputFile = "docs/_artifacts/context7-$query.json"
  $response | ConvertTo-Json -Depth 10 | Out-File $outputFile
  
  Write-Host "[Context7] $query saved to $outputFile"
}
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### Manual Testing (Smoke Tests)

**Documented in**: `docs/P6-STABILITY.md`

**Checklist**:
- [ ] Resizable panels (drag, collapse)
- [ ] Hotkeys (Ctrl+K, Ctrl+Enter, Escape)
- [ ] Design Mode (overlay, select, apply)
- [ ] Image Generation (/gen ‚Üí gallery)
- [ ] Job Queue (SSE real-time updates)
- [ ] Templates (search, import shadcn)
- [ ] Command Palette (‚åòK ‚Üí execute)

---

### Automated Testing (REVISOR)

**Infrastructure**: ‚úÖ Complete (7 commits)

**Test Suites**:
1. **E2E Tests** (Playwright) ‚Äî 5 test files:
   - `sanity.spec.ts` ‚Äî 3 panels, iframe, CSP headers
   - `design-mode.spec.ts` ‚Äî `/design on`, `/select`, `/apply`
   - `generation-comfy.spec.ts` ‚Äî `/gen image` ‚Üí gallery
   - `jobs-queue.spec.ts` ‚Äî SSE modal, real-time updates
   - `health.spec.ts` ‚Äî `/diagnostics` + ComfyUI offline fallback

2. **A11y Tests** (axe-core) ‚Äî 3 pages:
   - `/` (home page)
   - `/diagnostics` (health dashboard)
   - `/builder-v0` (–µ—Å–ª–∏ —Ç–∞–∫–æ–π —Ä–æ—É—Ç –µ—Å—Ç—å)

3. **Performance Tests** (Lighthouse CI):
   - Performance score (target: 0.7+)
   - Accessibility score (target: 0.9+)
   - Best Practices (target: 0.8+)
   - SEO (target: 0.8+)

**Execution Status**: ‚è∏Ô∏è **NOT RUN YET** (awaiting `pnpm revisor:all`)

---

### Test Commands

```powershell
cd apps/admin

# Run Playwright E2E
pnpm revisor:test

# Run Lighthouse CI
pnpm revisor:lhci

# Run axe-core A11y
pnpm revisor:axe

# Run all tests
pnpm revisor:all

# Generate summary report
pnpm revisor:report
```

---

## üöÄ CI/CD –ò –î–ï–ü–õ–û–ô

### GitHub Actions Workflows

**1. REVISOR Workflow** (`.github/workflows/revisor.yml`)
- **Trigger**: Push to `audit/**` branches, PR opened/synchronized
- **OS**: windows-latest
- **Steps**:
  1. Checkout code
  2. Setup Node.js 22 with pnpm cache
  3. Install dependencies
  4. Install Playwright browsers
  5. Build Next.js
  6. Run REVISOR suite (E2E + LHCI + axe)
  7. Upload artifacts (HTML reports, JSON, videos, traces)
  8. Comment PR with summary

**Status**: ‚úÖ Configured, not triggered yet

---

**2. Main CI Workflow** (future, P10)
- **Trigger**: Push to `main`, PR opened
- **Jobs**:
  - Lint + Type check
  - Build
  - Run `/api/health`
  - Run Playwright E2E
  - Deploy preview (Vercel)

**Status**: ‚è∏Ô∏è Not implemented yet

---

### Deployment Targets

**Development**:
- **URL**: http://localhost:3001/
- **Auto**: –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

**Staging**:
- **URL**: https://staging.orchestrator.dev
- **Deploy**: Manual via SSH
- **Trigger**: Push to `staging` branch

**Production**:
- **URL**: https://orchestrator.dev
- **Deploy**: Manual via SSH
- **Trigger**: Tagged release (`v11.0.0`)

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### Critical Issues (P0)

**1. Port 3000 Conflict**
- **Issue**: Process 50956 occupies port 3000, refuses termination without admin rights
- **Mitigation**: Dev server runs on port 3001
- **Impact**: ‚ö†Ô∏è Non-blocking (config updated)
- **Fix**: Kill process manually or use port 3001 permanently

---

### Non-Critical Issues (P1-P2)

**2. Context7 JSON Depth Truncation**
- **Issue**: PowerShell `ConvertTo-Json -Depth 10` warning on 10/19 queries
- **Impact**: ‚ö†Ô∏è Minimal (top-level results array intact, snippets accessible)
- **Status**: Acceptable for development

**3. FLUX API Unavailable**
- **Issue**: Port 5007 not accessible (external service)
- **Mitigation**: ComfyUI fallback (SDXL) works perfectly
- **Impact**: ‚ö†Ô∏è Degraded (fallback operational)
- **Fix**: Start FLUX service or continue using ComfyUI

**4. HyperUI Import Not Implemented**
- **Issue**: No JSON API for HyperUI (HTML only)
- **Workaround**: Manual copy from hyperui.dev
- **Status**: ‚ö†Ô∏è Future enhancement (P8 planned)
- **Fix**: Implement HTML‚ÜíReact scraper

**5. PowerShell 7.5.4 Not Installed**
- **Issue**: Downloaded MSI but requires admin rights
- **Current Version**: 7.5.3
- **Impact**: ‚ö†Ô∏è Non-blocking (current version works)
- **Action**: User needs to install manually

---

### Minor Issues (P3)

**6. Playwright Tests Not Written Yet**
- **Issue**: Infrastructure ready, test files created, but not executed
- **Impact**: ‚ö†Ô∏è No automated coverage yet
- **Status**: ‚è∏Ô∏è Awaiting execution (current task)
- **Fix**: Run `pnpm revisor:all` and fix failing tests

**7. No Error Boundaries**
- **Issue**: React Error Boundaries –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã (–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
- **Impact**: üü° UX issue (not critical)
- **Fix**: Add `error.tsx` and `global-error.tsx` –≤ App Router

**8. Image Loading Not Optimized**
- **Issue**: Lazy loading –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **Impact**: üü° Performance (minor)
- **Fix**: Use Next.js `<Image>` component + lazy loading

---

## üìÖ ROADMAP

### ‚úÖ Completed (P0-P6)
- Resizable Layout
- Hotkeys System
- Design Mode
- Image Generation
- SSE Job Queue
- Template Import
- Command Palette
- Stability Docs

---

### üîÑ In Progress (P7, REVISOR)
- Playwright E2E Tests (infrastructure complete, awaiting execution)
- Axe-core A11y Tests
- Lighthouse CI Performance Tests
- CI/CD GitHub Actions

---

### üìã Next (P8-P10)
- **P8**: HyperUI Import Automation (HTML scraper + React conversion)
- **P9**: Electron Wrapper (desktop app, auto-update)
- **P10**: Full CI/CD Pipeline (lint, type check, health, E2E, deploy)

---

### üåü Future Enhancements (P11+)
- **P11**: Metrics Dashboard (prom-client data visualization)
- **P12**: Multi-user Collaboration (WebSockets, cursor tracking)
- **P13**: AI Code Generation (LLM-powered component creation from screenshots)
- **P14**: Version Control (Git integration, undo/redo stack)
- **P15**: Plugin System (community extensions)

---

## üë• –ö–û–ú–ê–ù–î–ê –ò –ö–û–ù–¢–†–ò–ë–¨–Æ–¢–û–†–´

### Core Team
- **Lead Developer**: offflinerpsy (GitHub: @offflinerpsy)
- **AI Assistant**: GitHub Copilot (GPT-5)

### Contributors
- _(open for contributions)_

### Special Thanks
- **Dyad.dev v0** ‚Äî inspiration –¥–ª—è UI/UX
- **shadcn/ui** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **ComfyUI** ‚Äî AI image generation backend
- **React Community** ‚Äî –∑–∞ awesome libraries (resizable-panels, hotkeys-hook, cmdk)

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò –°–°–´–õ–ö–ò

### Internal Docs
- `README.md` ‚Äî Project overview
- `QUICK-START.md` ‚Äî Setup instructions
- `PROJECT-RULES.md` ‚Äî Coding standards
- `PROJECT-MAP.md` ‚Äî Component map
- `DEPLOYMENT-REPORT.md` ‚Äî Production deployment guide
- `TODO-NEXT.md` ‚Äî Future tasks
- `docs/BUILDER-V0-COMPLETE.md` ‚Äî P0-P6 complete summary
- `docs/P6-STABILITY.md` ‚Äî Stability report + health checks
- `docs/PROJECT-STATUS-FULL.md` ‚Äî Comprehensive status (17k words)
- `docs/REVISOR-REPORT.md` ‚Äî REVISOR audit infrastructure (459 lines)
- **`PROJECT-MEMORY-V11.md`** ‚Äî **THIS FILE** (–ø–æ–ª–Ω–∞—è –ø–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞)

### External Links
- **GitHub Repo**: https://github.com/offflinerpsy/orchestrator-v3
- **REVISOR PR**: https://github.com/offflinerpsy/orchestrator-v3/pull/3
- **Context7 API**: https://context7.com/v1/repositories/query
- **Playwright Docs**: https://playwright.dev/docs/intro
- **Axe-core**: https://playwright.dev/docs/accessibility-testing
- **Lighthouse CI**: https://github.com/GoogleChrome/lighthouse-ci
- **Next.js Docs**: https://nextjs.org/docs
- **shadcn/ui**: https://ui.shadcn.com/
- **ComfyUI**: https://github.com/comfyanonymous/ComfyUI

---

## üéì –ö–ê–ö –ü–û–õ–¨–ó–û–í–ê–¢–¨–°–Ø (Quick Reference)

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**1. Setup**:
```powershell
git clone https://github.com/offflinerpsy/orchestrator-v3.git
cd orchestrator-v3/apps/admin
pnpm install
cp .env.example .env.local
pnpm dev
```

**2. Development**:
- –û—Ç–∫—Ä—ã—Ç—å http://localhost:3001/builder-v0
- –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤ `apps/admin/components/builder-v0/`
- Hot reload –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É

**3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```powershell
pnpm revisor:build
pnpm revisor:all
pnpm revisor:report
```

**4. –ö–æ–º–º–∏—Ç**:
```powershell
git add .
git commit -m "feat: add new feature"
git push origin feature/new-feature
```

---

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**1. –û—Ç–∫—Ä—ã—Ç—å Builder**:
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:3001/builder-v0

**2. Design Mode**:
- –í–≤–µ—Å—Ç–∏ `/design on` –≤ —á–∞—Ç ‚Üí –Ω–∞–∂–∞—Ç—å Enter
- –ù–∞–≤–µ—Å—Ç–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç ‚Üí –∫–ª–∏–∫–Ω—É—Ç—å
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —ç–ª–µ–º–µ–Ω—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
- –ò–∑–º–µ–Ω–∏—Ç—å properties ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ `/apply`

**3. Image Generation**:
- –í–≤–µ—Å—Ç–∏ `/gen image sunset over mountains` ‚Üí Enter
- –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (—Å—Ç–∞—Ç—É—Å –≤ –≥–∞–ª–µ—Ä–µ–µ)
- –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí URL —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä

**4. Template Import**:
- –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–± "–®–∞–±–ª–æ–Ω—ã" –≤ Inspector
- –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é (UI, Marketing)
- –ö–ª–∏–∫–Ω—É—Ç—å "Import" –Ω–∞ –Ω—É–∂–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ `components/templates/`

**5. Command Palette**:
- –ù–∞–∂–∞—Ç—å `Ctrl+K` (–∏–ª–∏ `Cmd+K` –Ω–∞ Mac)
- –ù–∞—á–∞—Ç—å –ø–µ—á–∞—Ç–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- –í—ã–±—Ä–∞—Ç—å —á–µ—Ä–µ–∑ ‚Üë/‚Üì ‚Üí –Ω–∞–∂–∞—Ç—å Enter

---

### –î–ª—è QA –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤

**Manual Testing**:
1. Follow checklist –≤ `docs/P6-STABILITY.md`
2. Report bugs –≤ GitHub Issues
3. –î–æ–±–∞–≤–∏—Ç—å label `bug` + severity (`critical`, `major`, `minor`)

**Automated Testing**:
```powershell
cd apps/admin
pnpm revisor:all
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å reports/playwright/html/index.html
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å reports/axe/*.json
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å reports/lhci/
```

---

## üèÅ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**Orchestrator v11** ‚Äî —ç—Ç–æ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π** visual website builder —Å:
- ‚úÖ **6 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–∑** (P0-P6): 19.8 kB build size, 19 Context7 queries, 8 production commits
- ‚úÖ **Modern Stack**: Next.js 15, React 18, TypeScript 5.9, Tailwind CSS 3.4
- ‚úÖ **AI Integration**: ComfyUI + FLUX API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **Real-time Updates**: SSE –¥–ª—è job queue
- ‚úÖ **Production-Ready Docs**: 5 comprehensive docs (17k+ words total)
- ‚úÖ **Testing Infrastructure**: Playwright + axe + LHCI (awaiting execution)

**–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞**: üöÄ **QA (REVISOR audit)**
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ü—Ä–æ–≥–Ω–∞—Ç—å `pnpm revisor:all` ‚Üí –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Üí –ø–æ—á–∏–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏ ‚Üí release v11

**–≠—Ç–æ –∂–∏–≤–æ–π –ø—Ä–æ–µ–∫—Ç** –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ Git, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã.

---

**Last Updated**: 2025-10-21 00:15 UTC  
**Version**: v11.0.0-alpha  
**Branch**: main  
**Commit**: 8053e48 (docs: REVISOR complete audit report)  
**Next Milestone**: v11.0.0-beta (after REVISOR execution + critical fixes)

---

_–≠—Ç–∞ –ø–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã **–ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫** (–≤–∫–ª—é—á–∞—è AI-–∞–≥–µ–Ω—Ç–æ–≤) –º–æ–≥ **–±—ã—Å—Ç—Ä–æ –ø–æ–Ω—è—Ç—å** —á—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç, –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ –∫–∞–∫ —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî —Å–º–æ—Ç—Ä–∏ Internal Docs –∏–ª–∏ –ø–∏—à–∏ –≤ GitHub Issues._

**Made with ‚ù§Ô∏è by Orchestrator Team**
